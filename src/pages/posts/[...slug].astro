---
import PortableText from "../../components/PortableText.astro";
import Base from "../../layouts/Base.astro";
import Layout from "../../layouts/Layout.astro";
import { getPost, getPosts } from "../../lib/sanity";

export async function getStaticPaths() {
  const posts = await getPosts();
  return posts.map((post) => ({
    params: { slug: post.slug.current },
  }));
}

const { slug } = Astro.params
const post = await getPost(slug);

export const prerender = true;
---

<PortableText portableText={post.body} title={post.title} author={post.author} publishedAt={post.publishedAt} excerpt={post.excerpt} tags={post.tags}/>
<!-- </Layout> -->
<!-- </Base> -->